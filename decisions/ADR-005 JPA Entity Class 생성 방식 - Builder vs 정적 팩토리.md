# ADR-005: JPA Entity Class 생성 방식 - Builder vs 정적 팩토리

## Status
Accepted

## Context
Spring Data JPA 환경에서 우리 프로젝트는 엔티티 생성 방식을 표준화해야한다. 
Entity 는 도메인 규칙을 보장해야 하고 연관관계 무결성, 기본값 초기화, 생성 시 검증이 중요하다.

고려한 대안
1. 정적 팩토리 사용
    - 장점 
      - 생성 메서드에 의미 있는 이름을 부여할 수 있다.
      - 생성 시 검증, 초기화 로직을 한 곳에서 강제할 수 있다.
      - 엔티티 불변식 및 연관관계 무결성을 보장하기 쉽다.
    - 단점 
      - 선택적 파라미터가 많을 때 오버로드가 많아 져서 가독성이 떨어진다.

2. Builder 패턴
    - 장점
      - 선택적 파라미터가 많을 때 가독성이 좋아진다.
    - 단점
      - 검증/초기화 로직이 분산되거나 누락될 수 있다.
      - Builder를 통해 도메인 규칙을 우회하여 잘못된 객체가 생성될 가능성이 있다.

## Decision
- 기본적으로 정적 팩토리 메서드를 사용한다.
- 하지만 생성자 오버로드가 3개 이상이 되거나 선택적 파라미터가 5개 이상일 경우에는 Builder 패턴을 적용한다.
- Builder를 적용하더라도, build()는 반드시 단일 생성자 또는 정적 팩토리 메서드로 위임하여 검증·초기화 로직이 분산되지 않도록 한다.

## Consequences
**장점** 
- 정적 팩토리로 도메인 규칙을 강제하고 생성 시점의 일관성을 보장할 수 있다.

**단점**
- 두 가지 방식을 혼용하기 때문에 일관성을 체크해야한다.
- Builder 사용을 잘못하면 검증 로직이 우회될 위험이 있다.

**이후 고려할 점**
- 특정 Entity에서 정적 팩토리 메서드를 사용하다가 Builder 패턴으로 전환할 경우 기준을 명확히 해야 한다.
    - 예: 오버로드 메서드 3개 이상 또는 선택적 파라미터 5개 이상일 때 Builder 도입 고려.