# ADR-006: 로깅 프레임워크 선택 - Logback
---

## Status
---  
Accepted

## Context
---
운영 중 발생하는 문제를 모니터링하거나 추적하고, 데이터를 분석하여 통계를 내기 위해 로깅(logging) 기능을 도입해야 한다.
프로젝트에서 주로 사용해왔던 로깅 방식은 Lombok의 @Slf4j 어노테이션을 활용한 것으로 내부적으로 SLF4J(Simple Logging Facade for Java) 를 사용한다.

SLF4J는 이름 그대로 로깅 시스템에 대한 추상화 계층을 제공한다.
- 자체로는 동작하지 않고, 실제 구현체(Logback, Log4j, java.util.logging 등)가 필요하다.
- SLF4J를 의존하는 클라이언트 코드는 어떤 구현체를 쓰든 변경 없이 사용 가능하다.

따라서 우리는 SLF4J의 구현체를 선택해야 하며, Logback, Log4j, JUL(java.util.logging) 중에서 하나를 결정해야 한다.


## Decision
---
우리는 Logback을 구현체로 채택한다.

1. 선택 이유
- **성능** : 매우 빠른 처리 성능과 비동기 로깅 기능 지원.
- **구성의 유연성** : XML 기반 구성 파일을 통해서 유연하게 설정이 가능하다.
- **다양한 로깅 레벨 지원** : trace, debug, info, warn, error
- **효율성** : 작은 메모리 점유
- **다양한 기능**
    - maxHistory 설정으로 일정 기간이 지나면 로그 파일 자동 삭제
    - 롤링 정책을 통해서 로그 관리 자동화

<br/>

2. 조합
- 로그 출력은 SLF4J API + Logback 구현체 조합으로 처리된다.
- 로그 레벨 기본값은 INFO로 설정하며 그로 인해 TRACE, DEBUG 레벨은 기록되지 않는다.

<br/>

3. Logback 설정 방식
- 크게 두가지 설정이 있다.
    - 1. application.properties / application.yml 설정에서 간단하게 설정이 가능하다.
    - 2. logback-spring.xml 설정
      - 로그 패턴, MDC 등 고급 설정이 필요한 경우 사용한다.

**결론은 logback-spring.xml 설정을 할것이다.** 


## Consequences
---

**장점**
- 운영 안정성 : 로그 파일 관리 자동화 가능
- 문제 추적 용이 : MDC 등을 통해 요청 단위 추적이 가능해져서 장애 분석이 빨라진다
- 유연한 설정 : 개발/운영 환경에 따라서 다른 로그 출력 방식 적용이 가능하다

**단점**
- 설정 복잡성
- 성능 이슈 가능 : 로그를 과하게 기록하거나 동기 방식으로 처리하면 성능 저하가 발생할 수 있다

**이후 고려사항**
- 비동기 로깅
- 분산환경 확장 
- 민감 정보 관리